<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>Login</title>
  <link rel="shortcut icon" href="../imagens/favicon.ico" type="image/x-icon">
  <link href="style (1).css" rel="stylesheet" type="text/css" />
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <script src="sweetalert2.all.min.js"></script>
  <script src="script.js"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap" rel="stylesheet">
  <link rel="stylesheet"
  href="https://unpkg.com/boxicons@latest/css/boxicons.min.css">
  
</head>

<body>
  <header>
  <div class="primeira">
    <nav>
     <div>
      <a href="../index.html">
       <img class="logo" src="../imagens/logosemfundo.png" alt="TransPeste">
      </a>
     </div>
      <ul>
        <li> <a href="../index.html">Home</a></li>
          <li> <a href="#">Info</a></li>
          <li> <a href="#">Sobre</a></li>
          <li> <a href="#">Perfil</a></li>
      </ul>
      <button type="button">Login</button>
    </nav>
  </div>
</header>
    <div class="meio">

      <section class="login">
        <div class="login-container">
          <div class="login-block">
            <h2>Responsável</h2>
            <input id="responsavel-email" type="email" placeholder="E-mail" />
            <input id="responsavel-senha" type="password" placeholder="Senha" />
            <a href="../telainicial/cadastro.html">Esqueceu sua senha?</a>
            <br />
            <button type="submit" onclick="loginResponsavel()">Login</button>
          </div>
      
          <div class="login-block">
            <h2>Motorista</h2>
            <input id="motorista-email" type="email" placeholder="E-mail" />
            <input id="motorista-senha" type="password" placeholder="Senha" />
            <a href="../telainicial/cadastro.html">Esqueceu sua senha?</a>
            <br />
            <button type="submit" onclick="loginMotorista()">Login</button>
          </div>
        </div>
        <br>
        <button type="submit"><a href="../telainicial/cadastro.html">Cadastrar-se</a></button>
      </section>
     </div>
<footer>
      <section class="Contato">
        <div class="infogeral">
            <div class="pri">

                <p>Rua dos bobos n 0,Brazil, <br> Sp Grande São Paulo 32241 290</p>
                <p>4002 8922</p>
                <p>TransPeste@gmail.com</p>

   
            </div>

            <div class="seg">
                <h4>Suporte</h4>
                <p>Sobre nos</p>
                <p>Guia de Cadastro</p>
                <p>Termos</p>
                <p>FAQ</p>
                <p>Privacidade</p>
            </div>

            <div class="ter">
                <h4>Nossas Redes Sociais</h4>
             <div class="media">
                    <a href="#"><i class='bx bxl-facebook'></i></a>
                    <a href="#"><i class='bx bxl-twitter' ></i></a>
                    <a href="#"><i class='bx bxl-instagram' ></i></a>
                    <a href="#"><i class='bx bxl-youtube' ></i></a>
                    <a href="#"><i class='bx bxl-linkedin' ></i></a>
                </div>
            </div>

            <div class="qua">
                <h4>TransPeste</h4>
                <p>Tudo sobre viagens</p>
                <p>Segurança na hora de viajar</p>
                <p>Certificados</p>
                <p>Login</p>
            </div>

  
        </div>
    </section>
  </footer>

    <div class="rodape">
        <p>Copyright © @2023. All Rights Reserved.Designd By TransPeste.</p>
    </div>

    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>


    <script>
function loginResponsavel() {
  const email = document.getElementById('responsavel-email').value;
  const senha = document.getElementById('responsavel-senha').value;

  // Verifica se os campos de email e senha estão preenchidos
  if (email.trim() !== '' && senha.trim() !== '') {
    axios.get('https://crud-server-json-trans-peste.vercel.app/responsaveis')
      .then(function(response) {
        const responsaveis = response.data;
        const responsavelEncontrado = responsaveis.find(responsavel => responsavel.email === email && responsavel.senha === senha);
        console.log(idLogado);
        if (responsavelEncontrado) {
          var idLogado = responsavelEncontrado.id;
          console.log('Login do responsável realizado com sucesso!');
          // Redirecionar ou realizar outras ações após o login bem-sucedido
          window.location.href = `../telainicialusu/cadastrarrota.html?id=${idLogado}`;
        } else {
          console.error('E-mail ou senha inválidos para o responsável.');
          Swal.fire({
                      icon: 'error',
                      title: 'Oops...',
                      text: 'E-mail ou senha inválidos para o responsável!',
                      confirmButtonColor: '#EE1C47'
                    })
        }
      })
      .catch(function(error) {
        console.error('Erro ao fazer login do responsável:', error);
      });
  } else {
    console.error('Por favor, preencha todos os campos!');
    Swal.fire({
                      icon: 'error',
                      title: 'Oops...',
                      text: 'Por favor, preencha todos os campos!',
                      confirmButtonColor: '#EE1C47'
              })
  }
}

function loginMotorista() {
  const email = document.getElementById('motorista-email').value;
  const senha = document.getElementById('motorista-senha').value;

  // Verifica se os campos de email e senha estão preenchidos
  if (email.trim() !== '' && senha.trim() !== '') {
    axios.get('https://crud-server-json-trans-peste.vercel.app/motoristas')
      .then(function(response) {
        const motoristas = response.data;
        const motoristaEncontrado = motoristas.find(motorista => motorista.email === email && motorista.senha === senha);
        if (motoristaEncontrado) {
          var idLogado = motoristaEncontrado.id;
          console.log(idLogado);
          console.log('Login do motorista realizado com sucesso!');
          // Redirecionar ou realizar outras ações após o login bem-sucedido
          window.location.href = `../loginmotorista/cadastrarrota.html?id=${idLogado}`;
        } else {
          console.error('E-mail ou senha inválidos para o motorista.');
          alert('E-mail ou senha inválidos para o motorista.');
        }
      })
      .catch(function(error) {
        console.error('Erro ao fazer login do motorista:', error);
      });
  } else {
    console.error('Por favor, preencha todos os campos!');
    alert('Por favor, preencha todos os campos!');
  }
}


    </script>

 
</body>

</html>
