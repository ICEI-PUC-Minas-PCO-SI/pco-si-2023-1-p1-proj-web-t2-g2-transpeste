<!DOCTYPE html>
<html>

<head>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js%22%3E"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.mask/1.14.16/jquery.mask.min.js%22%3E"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.19.0/axios.js"></script> <script src="axios.js"></script>


  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>Editar Usuário</title>
  <link href="../loginusuario/csscadastrocri.css" rel="stylesheet" type="text/css" />
  
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="shortcut icon" href="../imagens/favicon.ico" type="image/x-icon">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap"
    rel="stylesheet">
  <link rel="stylesheet" href="https://unpkg.com/boxicons@latest/css/boxicons.min.css">

</head>

<body>
  <div class="primeira">
    <nav>
      <div>
        <img class="logo" src="../imagens/logosemfundo.png" alt="TransPeste">
      </div>
      <div>
        <ul>
   
          <li onclick="redirecionarhome()"> <a href="#">Home</a></li>
          <li> <a href="#">Info</a></li>
          <li> <a href="#">Sobre</a></li>
          <li onclick="redirecionarperfil()"> <a href="#">Perfil</a></li>
          <li><button type="button" onclick="redirecionarperfil()" > <a href="#">Meu Perfil</a> </button></li>

        </ul>
      </div>
    </nav>
  </div>

  <div class="meio">

    <div class="form">
      <div class="form-header">
        <div class="title">
          <h1>Seu Perfil</h1>
        </div>
      </div>
      <div class="input_group">
        <div class="input-box">
          <label for="nome">Nomes</label>
          <input id="nome" type="text" name="Nome" placeholder="Digite aqui seu nome completo" required>
        </div>

        <div class="input-box">
          <label for="Telefone">Telefone</label>
          <input id="telefone" type="tel" name="telefone" placeholder="Digite aqui seu telefone" required>
        </div>

        <div class="input-box">
          <label for="Data de nascimento">Data de nascimento</label>
          <input id="nascimento" type="date" name="data" placeholder="Digite a sua data de nascimento" required>
        </div>

        <div class="input-box">
          <label for="cpf">CPF</label>
          <input id="cpf" type="number" name="cpf" placeholder="Digite aqui seu CPF" required>
        </div>

        <div class="input-box">
          <label for="email">E-mail</label>
          <input id="email" type="email" name="email" placeholder="Digite aqui seu email" required>
        </div>

        <div class="input-box">
          <label for="endereço">Endereço</label>
          <input id="endereço" type="text" name="endereço" placeholder="Digite aqui seu endereço completo" required>
        </div>




        <div id="foto">

          <p>Escolha sua foto de perfil:</p>
          <br>
          <p><input type="file" name="Foto" id="Foto de perfil"></p>
          <br>
          <br>
        </div>


        <div class="continue-button">
          <button onclick="salvar()" onclick="redirecionarperfil()"><a href="#">Salvar</a> </button>
        </div>

        </form>
      </div>
    </div>

    <section class="contato">
      <div class="infogeral">
        <div class="pri">
          <p>Rua dos bobos n 0,Brazil, <br> Sp Grande São Paulo 32241 290</p>
          <p>4002 8922</p>
          <p>TransPeste@gmail.com</p>
        </div>
        <div class="seg">
          <h4>Suporte</h4>
          <p>Sobre nos</p>
          <p>Guia de Cadastro</p>
          <p>Termos</p>
          <p>FAQ</p>
          <p>Privacidade</p>
        </div>
        <div class="ter">
          <h4>Nossas Redes Sociais</h4>
          <div class="media">
            <a href="#"><i class='bx bxl-facebook'></i></a>
            <a href="#"><i class='bx bxl-twitter'></i></a>
            <a href="#"><i class='bx bxl-instagram'></i></a>
            <a href="#"><i class='bx bxl-youtube'></i></a>
            <a href="#"><i class='bx bxl-linkedin'></i></a>
          </div>
        </div>
        <div class="qua">
          <h4>TransPeste</h4>
          <p>Tudo sobre viagens</p>
          <p>Segurança na hora de viajar</p>
          <p>Certificados</p>
          <p>Login</p>
        </div>
      </div>

    </section>

    <div class="rodape">
      <p>Copyright © @2023. All Rights Reserved.Designd By TransPeste.</p>
    </div>
 
<script>

function redirecionarhome()
{
        window.location.href= `../telainicialusu/cadastrarrota.html?id=${idurl} `
}

function redirecionarperfil()
{
        window.location.href= `../loginusuario/perfilusuario.html?id=${idurl} `
}



  const inputnome = document.querySelector('input#nome')
const inputtelefone = document.querySelector('input#telefone')
const inputemail = document.querySelector('input#email')

const urlresponsavel = "https://crud-server-json-trans-peste.vercel.app/responsaveis"

const urlinteira = new URLSearchParams(window.location.search)
const idurl = urlinteira.get('id')

async function DadosResponsavel() {
  console.log(urlresponsavel + '/' + idurl)
  const dadosnaURL = await fetch(urlresponsavel + '/' + idurl)
  console.log(dadosnaURL)
  const dadosquepegueijason = await dadosnaURL.json()

  inputnome.value = dadosquepegueijason.nome + ' ' + dadosquepegueijason.sobrenome
  inputtelefone.value = dadosquepegueijason.telefone
  inputemail.value = dadosquepegueijason.email
}
DadosResponsavel()

async function salvar() {
  
  const nascimento = document.getElementById('nascimento').value;
  const cpf = document.getElementById('cpf').value;
  const endereco = document.getElementById('endereço').value;


  var url = `https://crud-server-json-trans-peste.vercel.app/responsaveis`;


const res = await  axios.put(`https://crud-server-json-trans-peste.vercel.app/responsaveis/${idurl}`,{ 
  id: idurl,
  nome: inputnome.value,  
  cpf: cpf,
  endereco: endereco,
  telefone: inputtelefone.value,
  email: inputemail.value,
  nascimento : nascimento 
}) 
.then (function (){
  
})

}
</script>
</body>

</html>