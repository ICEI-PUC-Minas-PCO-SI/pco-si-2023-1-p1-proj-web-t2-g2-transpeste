<!DOCTYPE html>
<html>

<head>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <script src="sweetalert2.all.min.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js%22%3E"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.mask/1.14.16/jquery.mask.min.js%22%3E"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.19.0/axios.js"></script> <script src="axios.js"></script>



  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>Cadastro Criança</title>
  <link href="../loginusuario/csscadastrocri.css" rel="stylesheet" type="text/css" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap"
    rel="stylesheet">
  <link rel="stylesheet" href="https://unpkg.com/boxicons@latest/css/boxicons.min.css">
  <link rel="shortcut icon" href="../imagens/favicon.ico" type="image/x-icon">
</head>

<body>
  <div class="primeira">
    <nav>
      <div>
        <img class="logo" src="../imagens/logosemfundo.png" alt="TransPeste">
      </div>
      <div>
        <ul>
          <li onclick="redirecionarhome()"> <a href="#">Home</a></li>
          <li> <a href="#">Info</a></li>
          <li> <a href="#">Sobre</a></li>
          <li><button type="button" onclick="redirecionarperfil()" > <a href="#">Meu Perfil</a> </button></li>
        </ul>
      </div>
    </nav>
  </div>

  <div class="meio">
    
    <div class="form">
      <div class="form-header">
        <div class="title">
          <h1>Perfil do pestinha</h1>
        </div>
      </div>
            <div class="input_group">
              <div class="input-box">
                <label for="nome">Nome da pestinha</label>
                <input id="nome" type="text" name="Nome" placeholder="Digite aqui o nome completo da criança" required>
              </div>
        
              <div class="input-box">
                <label for="Telefone">Telefone</label>
                <input id="telefone" type="tel"  name="telefone" placeholder="Digite aqui o telefone para contato" required>
              </div>
        
              <div class="input-box">
                <label for="Data de nascimento">Data de nascimento</label>
                <input id="nascimento" type="date"  name="data" placeholder="Data de nascimento da criança" required>
              </div>
        
              <div class="input-box">
                <label for="cpf">CPF</label>
                <input id="cpf" type="number"  name="cpf" placeholder="Digite o cpf " required>
              </div>
              
              <div class="input-box">
                <label for="Escola">Nome da escola</label>
                <input id="escola" type="escola"  name="escola" placeholder="Digite aqui qual a escola" required>
              </div>
        
              <div class="input-box">
                <label for="endereço_escola">Endereço da escola</label>
                <input id="endereço_escola" type="text"  name="endereço_escola" placeholder="Digite aqui o endereço completo da escola" required>
              </div>
        
        
            
  
                <div id="foto">

                   <p>Escolha uma foto de perfil para o seu pestinha:</p>
                   <br>
                   <p><input type="file" name="Foto" id="Foto de perfil"></p> 
                   <br>
                   <br>
                </div>
          
  
        
                <div class="continue-button">
                  <button onclick="salvar()"><a href="#">Salvar</a> </button>
                </div>
         
        </form>
    </div>
  </div>

  <section class="contato">
    <div class="infogeral">
      <div class="pri">
        <p>Rua dos bobos n 0,Brazil, <br> Sp Grande São Paulo 32241 290</p>
        <p>4002 8922</p>
        <p>TransPeste@gmail.com</p>
      </div>
      <div class="seg">
        <h4>Suporte</h4>
        <p>Sobre nos</p>
        <p>Guia de Cadastro</p>
        <p>Termos</p>
        <p>FAQ</p>
        <p>Privacidade</p>
      </div>
      <div class="ter">
        <h4>Nossas Redes Sociais</h4>
        <div class="media">
          <a href="#"><i class='bx bxl-facebook'></i></a>
          <a href="#"><i class='bx bxl-twitter'></i></a>
          <a href="#"><i class='bx bxl-instagram'></i></a>
          <a href="#"><i class='bx bxl-youtube'></i></a>
          <a href="#"><i class='bx bxl-linkedin'></i></a>
        </div>
      </div>
      <div class="qua">
        <h4>TransPeste</h4>
        <p>Tudo sobre viagens</p>
        <p>Segurança na hora de viajar</p>
        <p>Certificados</p>
        <p>Login</p>
      </div>
    </div>

  </section>

  <div class="rodape">
    <p>Copyright © @2023. All Rights Reserved.Designd By TransPeste.</p>
  </div>
<img src="../loginusuario/telacadastrocri.html" alt="">
  <script>
const dadosurl = new URLSearchParams(window.location.search)
const idurl1 = dadosurl.get('id')
function redirecionarhome()
{
  window.location.href= `../telainicialusu/cadastrarrota.html?id=${idurl} `
       
}

function redirecionarperfil()
{
       window.location.href= `../loginusuario/perfilusuario.html?id=${idurl} `
}
function redirecionareditar()
{
        window.location.href= `..../loginusuario/telacadastrocri.html?id=${idurl} `
}

const urlcriancas = "https://crud-server-json-trans-peste.vercel.app/criancas"

const urlinteira = new URLSearchParams(window.location.search)
const idurl = urlinteira.get('id') 

const nome = document.getElementById('nome');
  const telefone = document.getElementById('telefone');
  const nascimento = document.getElementById('nascimento');
  const cpf = document.getElementById('cpf');
  const endereco_escola = document.getElementById('endereço_escola');
  const escola = document.getElementById('escola');

  async function dados(){
  const dadosCriancas = await fetch(urlcriancas+"/"+idurl)
  const criancasJson = await dadosCriancas.json()
  telefone.value = criancasJason.telefone
  nascimento.value = criancasJason.nascimento
  cpf.value = criancasJason.cpf
  endereco_escola.value = criancasJason.endereco_escola
  escola.value = criancasJason.escola

}
dados()


async function salvar() {
   nome = document.getElementById('nome').value;
   telefone = document.getElementById('telefone').value;
   nascimento = document.getElementById('nascimento').value;
   cpf = document.getElementById('cpf').value;
   endereco_escola = document.getElementById('endereço_escola').value;
   escola = document.getElementById('escola').value;
  

  var url = `https://crud-server-json-trans-peste.vercel.app/criancas`;

const res = await  axios.post(`https://crud-server-json-trans-peste.vercel.app/criancas`,{ 
  
  nome: nome, 
  cpf: cpf,
  telefone: telefone, 
  data_nascimento : nascimento,
  nome_escola: escola,
  endereco_escola: endereco_escola,
  avalicao:5,
  responsaveisid:idurl
 
}) 

.catch(function(error) { 
  $(document).ready(function(){
    Swal.fire({
  position: 'center',
  icon: 'success',
  title: 'Criança Cadastrada!',
  showConfirmButton: false,
  timer: 1500
})
})
setTimeout(function() {
 window.location.href = `../loginusuario/perfilusuario.html?id=${idurl}`;
},1200)

});  

}

if(!idurl1)
{
    window.location.href="../telainicial/login.html"
}


  </script>
 


  
</body>

</html>